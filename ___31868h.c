#include "drally.h"

	extern byte ___199f54h[];
	extern byte ___196b24h[];
	extern byte ___185a14h_UseWeapons[];
	extern byte ___1a1ef8h[];
	extern byte ___1a01fch[];
	extern byte ___1806a0h[];
	extern byte ___1806a8h[];
	extern byte ___1806b0h[];
	extern byte ___1806b8h[];
	extern byte ___1806c0h[];
	extern byte ___1806c8h[];
	extern byte ___1a112ch__VESA101_ACTIVESCREEN_PTR[];
	extern byte ___1a1e80h[];
	extern byte ___1930e0h[];
	extern byte ___193180h[];
	extern byte ___193130h[];
	extern byte ___182370h[];
	extern byte ___1931d0h[];
	extern byte ___193220h[];
	extern byte ___193270h[];
	extern byte ___1932c0h[];
	extern byte ___193310h[];
	extern byte ___193360h[];
	extern byte ___1933b0h[];
	extern byte ___24cc54h[];
	extern byte ___196aa4h[];
	extern byte ___1806dch[];
	extern byte ___1806e4h[];
	extern byte ___1a1e84h[];
	extern byte ___193400h[];
	extern byte ___193450h[];
	extern byte ___1934a0h[];
	extern byte ___1934f0h[];
	extern byte ___193540h[];
	extern byte ___1a1028h[];
	extern byte ___1a0ef8h[];
	extern byte ___193590h[];
	extern byte ___1a01e0h[];
	extern byte ___182388h[];
	extern byte ___193630h[];
	extern byte ___1935e0h[];
	extern byte ___180724h[];
	extern byte ___193680h[];
	extern byte ___1936d0h[];
	extern byte ___196aa8h[];
	extern byte ___196aach[];
	extern byte ___1a1ff1h[];

void ___12cb8h__VESA101_PRESENTSCREEN(void);
void ___2ab50h(void);
void dRally_Sound_pushEffect(byte channel, byte n, dword unk, dword a0, dword a1, dword a2);
void dRally_Sound_freeEffectChannel(byte ch_num);
byte ___148cch_cdecl(dword, dword, dword, dword);
int rand_watcom106(void);
void ___13248h_cdecl(dword, dword ,dword, dword, dword);
void ___13094h_cdecl(const char *, dword);

dword ___31868h(void){

	dword 	eax, ebx, ecx, edx, edi, esi, ebp;
	byte 	esp[0x54];


		ebx = 0x83;
		edx = 0x21;
		ecx = D(___199f54h);
		D(esp+0x4c) = ebx;
		D(esp+0x50) = edx;
		if(ecx == 0) goto ___3189eh;
		eax ^= eax;
		goto ___32224h;
___3189eh:
		eax = rand_watcom106();
		edx = eax;
		ebx = 0x64;
		edx = (int)edx>>0x1f;
		___idiv32(&eax, &edx, ebx);
		esi = 0x1;
		edi = D(___196b24h);
		D(esp+0x44) = esi;
		if((int)edx >= (int)edi) goto ___32207h;
		if(D(___185a14h_UseWeapons) == 0) goto ___32207h;
		ecx = 0x5;
		D(___196b24h) = ecx;
		eax = rand_watcom106();
		edx = eax;
		edx = (int)edx>>0x1f;
		___idiv32(&eax, &edx, ebx);
		ebx = edx;
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		eax <<= 0x2;
		if((int)ebx >= 0x32) goto ___31d05h;
		if(ecx != D(eax+___1a01fch)) goto ___31929h;
		ebx = 0x1;
		edi = esp+0x34;
		esi = ___1806a0h;
		D(esp+0x48) = ebx;
		D(edi) = D(esi); edi += 4; esi += 4;
		W(edi) = W(esi); edi += 2; esi += 2;
___31929h:
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		if(D(eax*4+___1a01fch) != 4) goto ___3195ah;
		edi = esp+0x34;
		esi = ___1806a8h;
		D(edi) = D(esi); edi += 4; esi += 4;
		B(edi++) = B(esi++);
		D(esp+0x48) = 0x2;
___3195ah:
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		if(D(eax*4+___1a01fch) != 3) goto ___3198ch;
		ebp = 0x3;
		edi = esp+0x34;
		esi = ___1806b0h;
		D(esp+0x48) = ebp;
		D(edi) = D(esi); edi += 4; esi += 4;
		B(edi++) = B(esi++);
___3198ch:
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		if(D(eax*4+___1a01fch) != 2) goto ___319beh;
		ebx = 0x4;
		edi = esp+0x34;
		esi = ___1806b8h;
		D(esp+0x48) = ebx;
		D(edi) = D(esi); edi += 4; esi += 4;
		B(edi++) = B(esi++);
___319beh:
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		if(D(eax*4+___1a01fch) != 1) goto ___319efh;
		edi = esp+0x34;
		esi = ___1806c0h;
		D(edi) = D(esi); edi += 4; esi += 4;
		B(edi++) = B(esi++);
		D(esp+0x48) = 0x5;
___319efh:
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		if(D(eax*4+___1a01fch) != 0) goto ___31a21h;
		ebp = 0x6;
		edi = esp+0x34;
		esi = ___1806c8h;
		D(esp+0x48) = ebp;
		D(edi) = D(esi); edi += 4; esi += 4;
		B(edi++) = B(esi++);
___31a21h:
		ecx = 0xe6;
		ebx = 0x1e2;
		edx = D(esp+0x4c);
		eax = D(esp+0x50);
		___13248h_cdecl(eax, edx, ebx, ecx, 1);
		edx = D(esp+0x4c);
		edx += 0x25;
		ebp = 4*edx;
		ebx = D(esp+0x50);
		ebp += edx;
		eax = D(___1a112ch__VESA101_ACTIVESCREEN_PTR);
		ebp <<= 0x7;
		ecx = 0x80;
		eax += ebp;
		esi = D(___1a1e80h);
		ebx += eax;
		edx = 0x68;
		ebx += 0xc;
___31a6dh:
		edi = edx;
___31a6fh:
		L(eax) = B(esi);
		if(L(eax) == 0) goto ___31a77h;
		B(ebx) = L(eax);
___31a77h:
		ebx++;
		esi++;
		edi--;
		if(edi) goto ___31a6fh;
		ebx += 0x280;
		ebx -= edx;
		ecx--;
		if(ecx) goto ___31a6dh;
		edx = D(esp+0x50);
		edx += ebp;
		eax = ___1930e0h;
		edx += 0x80;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x35;
		eax = 4*edx;
		eax += edx;
		edx = D(esp+0x50);
		eax <<= 0x7;
		esi = ___193180h;
		edx += eax;
		eax = ___193130h;
		edx += 0x80;
		edi = esp;
		___13094h_cdecl(eax, edx);
		strcpy(edi, esi);
		esi = esp+0x34;
		edi = esp;
		edx = D(esp+0x4c);
		strcat(edi, esi);
		esi = ___182370h;
		edi = esp;
		edx += 0x45;
		strcat(edi, esi);
		eax = 4*edx;
		eax += edx;
		edx = D(esp+0x50);
		eax <<= 0x7;
		eax += edx;
		edx = eax+0x80;
		eax = esp;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x55;
		eax = 4*edx;
		eax += edx;
		ebx = D(esp+0x50);
		eax <<= 0x7;
		eax += ebx;
		edx = eax+0x80;
		eax = ___1931d0h;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x65;
		eax = 4*edx;
		eax += edx;
		eax <<= 0x7;
		edx = ebx+eax;
		eax = ___193220h;
		edx += 0x80;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x75;
		eax = 4*edx;
		eax += edx;
		eax <<= 0x7;
		eax += ebx;
		edx = eax+0x80;
		eax = ___193270h;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x85;
		eax = 4*edx;
		eax += edx;
		eax <<= 0x7;
		edx = ebx+eax;
		eax = ___1932c0h;
		edx += 0x80;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x95;
		eax = 4*edx;
		eax += edx;
		eax <<= 0x7;
		edx = ebx+eax;
		eax = ___193310h;
		edx += 0x80;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0xa5;
		eax = 4*edx;
		eax += edx;
		eax <<= 0x7;
		edx = ebx+eax;
		eax = ___193360h;
		edx += 0x80;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0xb5;
		eax = 4*edx;
		eax += edx;
		eax <<= 0x7;
		edx = ebx+eax;
		eax = ___1933b0h;
		edx += 0x80;
		___13094h_cdecl(eax, edx);
		___12cb8h__VESA101_PRESENTSCREEN();
		edx ^= edx;
___31c7dh:
		edx++;
		___2ab50h();
		if((int)edx < 0x32) goto ___31c7dh;
		edx = 0x5;
		ecx = D(___24cc54h);
		ebx ^= ebx;
		eax = edx;
		dRally_Sound_pushEffect(eax, edx, ebx, ecx, 0x24000, 0x8000);
		edx ^= edx;
___31ca8h:
		edx++;
		___2ab50h();
		if((int)edx < 0x14) goto ___31ca8h;
		edi = 0x1;
		edx = D(esp+0x4c);
		eax = D(esp+0x50);
		ecx = esp+0x40;
		ebx ^= ebx;
		edx += 0xbe;
		eax += 0x80;
		D(esp+0x40) = edi;
		L(eax) = ___148cch_cdecl(eax, edx, ebx, ecx);
		if(edi != D(esp+0x40)) goto ___321efh;
		eax = D(esp+0x48);
		D(___196aa4h) = eax;
		eax = 0x5;
		dRally_Sound_freeEffectChannel(eax);
		eax = D(esp+0x44);
		return eax;
___31d05h:
		if(ecx != D(eax+___1a01fch)) goto ___31d20h;
		edi = esp+0x34;
		esi = ___1806b0h;
		D(edi) = D(esi); edi += 4; esi += 4;
		B(edi++) = B(esi++);
		D(esp+0x48) = 0x1;
___31d20h:
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		if(D(eax*4+___1a01fch) != 4) goto ___31d52h;
		eax = 0x2;
		edi = esp+0x34;
		esi = ___1806b8h;
		D(esp+0x48) = eax;
		D(edi) = D(esi); edi += 4; esi += 4;
		B(edi++) = B(esi++);
___31d52h:
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		edx = D(eax*4+___1a01fch);
		if(edx != 3) goto ___31d81h;
		edi = esp+0x34;
		esi = ___1806dch;
		D(esp+0x48) = edx;
		D(edi) = D(esi); edi += 4; esi += 4;
		B(edi++) = B(esi++);
___31d81h:
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		if(D(eax*4+___1a01fch) != 2) goto ___31db2h;
		edi = esp+0x34;
		esi = ___1806c0h;
		D(edi) = D(esi); edi += 4; esi += 4;
		B(edi++) = B(esi++);
		D(esp+0x48) = 0x4;
___31db2h:
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		if(D(eax*4+___1a01fch) != 1) goto ___31de4h;
		ebp = 0x5;
		edi = esp+0x34;
		esi = ___1806c8h;
		D(esp+0x48) = ebp;
		D(edi) = D(esi); edi += 4; esi += 4;
		B(edi++) = B(esi++);
___31de4h:
		edx = D(___1a1ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		if(D(eax*4+___1a01fch) != 0) goto ___31e14h;
		ebx = 0x6;
		eax = D(___1806e4h);
		D(esp+0x48) = ebx;
		D(esp+0x34) = eax;
___31e14h:
		ecx = 0xe6;
		ebx = 0x1e2;
		edx = D(esp+0x4c);
		eax = D(esp+0x50);
		___13248h_cdecl(eax, edx, ebx, ecx, 1);
		eax = D(esp+0x4c);
		eax += 0x25;
		ebp = 4*eax;
		ecx = D(esp+0x50);
		ebp += eax;
		eax = D(___1a112ch__VESA101_ACTIVESCREEN_PTR);
		ebp <<= 0x7;
		edx = 0x68;
		eax += ebp;
		esi = D(___1a1e84h);
		eax += ecx;
		ecx = 0x80;
		ebx = eax+0xc;
___31e60h:
		edi = edx;
___31e62h:
		L(eax) = B(esi);
		if(L(eax) == 0) goto ___31e6ah;
		B(ebx) = L(eax);
___31e6ah:
		ebx++;
		esi++;
		edi--;
		if(edi) goto ___31e62h;
		ebx += 0x280;
		ebx -= edx;
		ecx--;
		if(ecx) goto ___31e60h;
		edx = D(esp+0x50);
		edx += ebp;
		eax = ___193400h;
		edx += 0x80;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x35;
		eax = 4*edx;
		eax += edx;
		esi = D(esp+0x50);
		eax <<= 0x7;
		eax += esi;
		edx = eax+0x80;
		eax = ___193450h;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x45;
		eax = 4*edx;
		eax += edx;
		eax <<= 0x7;
		eax += esi;
		edx = eax+0x80;
		eax = ___1934a0h;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x55;
		eax = 4*edx;
		eax += edx;
		eax <<= 0x7;
		eax += esi;
		edx = eax+0x80;
		eax = ___1934f0h;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x65;
		eax = 4*edx;
		eax += edx;
		eax <<= 0x7;
		edx = esi+eax;
		eax = ___193540h;
		edx += 0x80;
		ebx = 0x4;
		___13094h_cdecl(eax, edx);
___31f2eh:
		eax = rand_watcom106();
		edx = eax;
		edx = (int)edx>>0x1f;
		___idiv32(&eax, &edx, ebx);
		eax = D(___1a1028h);
		ebp = edx;
		L(eax) = B(ebp+eax*4+___1a0ef8h);
		esi = D(___1a1ef8h);
		eax &= 0xff;
		if(eax == esi) goto ___31f2eh;
		esi = ___193590h;
		edi = esp;
		strcpy(edi, esi);
		eax = D(___1a1028h);
		edx ^= edx;
		L(edx) = B(ebp+eax*4+___1a0ef8h);
		eax = 8*edx;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		esi = ___1a01e0h;
		eax <<= 0x2;
		edi = esp;
		esi += eax;
		edx = D(esp+0x4c);
		strcat(edi, esi);
		esi = ___182388h;
		edi = esp;
		edx += 0x75;
		strcat(edi, esi);
		eax = 4*edx;
		eax += edx;
		edx = D(esp+0x50);
		eax <<= 0x7;
		edx += eax;
		eax = esp;
		edx += 0x80;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0x85;
		eax = 4*edx;
		eax += edx;
		edi = D(esp+0x50);
		eax <<= 0x7;
		eax += edi;
		edx = eax+0x80;
		esi = ___193630h;
		eax = ___1935e0h;
		edi = esp;
		___13094h_cdecl(eax, edx);
		strcpy(edi, esi);
		esi = esp+0x34;
		edi = esp;
		edx = D(esp+0x4c);
		strcat(edi, esi);
		esi = ___180724h;
		edi = esp;
		edx += 0x95;
		strcat(edi, esi);
		eax = 4*edx;
		eax += edx;
		edx = D(esp+0x50);
		eax <<= 0x7;
		eax += edx;
		edx = eax+0x80;
		eax = esp;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0xa5;
		eax = 4*edx;
		eax += edx;
		edx = D(esp+0x50);
		eax <<= 0x7;
		edx += eax;
		eax = ___193680h;
		edx += 0x80;
		___13094h_cdecl(eax, edx);
		edx = D(esp+0x4c);
		edx += 0xb5;
		eax = 4*edx;
		eax += edx;
		ebx = D(esp+0x50);
		eax <<= 0x7;
		eax += ebx;
		edx = eax+0x80;
		eax = ___1936d0h;
		___13094h_cdecl(eax, edx);
		___12cb8h__VESA101_PRESENTSCREEN();
		edx ^= edx;
___32137h:
		edx++;
		___2ab50h();
		if((int)edx < 0x32) goto ___32137h;
		edx = 0x5;
		ecx = D(___24cc54h);
		ebx ^= ebx;
		eax = edx;
		dRally_Sound_pushEffect(eax, edx, ebx, ecx, 0x24000, 0x8000);
		edx ^= edx;
___32162h:
		edx++;
		___2ab50h();
		if((int)edx < 0x14) goto ___32162h;
		ecx = 0x1;
		edx = D(esp+0x4c);
		eax = D(esp+0x50);
		ebx ^= ebx;
		D(esp+0x40) = ecx;
		edx += 0xbe;
		eax += 0x80;
		ecx = esp+0x40;
		L(eax) = ___148cch_cdecl(eax, edx, ebx, ecx);
		if(D(esp+0x40) != 1) goto ___321efh;
		eax = D(esp+0x48);
		D(___196aa8h) = eax;
		eax = D(___1a1028h);
		L(eax) = B(ebp+eax*4+___1a0ef8h);
		eax &= 0xff;
		D(___196aach) = eax;
		edx = eax;
		eax <<= 0x3;
		eax -= edx;
		eax <<= 0x2;
		eax -= edx;
		esi = ___1a01e0h;
		eax <<= 0x2;
		edi = ___1a1ff1h;
		esi += eax;
		strcpy(edi, esi);
___321efh:
		eax = 0x5;
		dRally_Sound_freeEffectChannel(eax);
		eax = D(esp+0x44);
		return eax;
___32207h:
		eax = D(___196b24h);
		if((int)eax >= 0x61) goto ___3221ah;
		edx = eax+0x2;
		D(___196b24h) = edx;
___3221ah:
		ebx ^= ebx;
		D(esp+0x44) = ebx;
		eax = D(esp+0x44);
___32224h:
		return eax;
}
